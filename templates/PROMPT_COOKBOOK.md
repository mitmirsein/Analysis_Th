```markdown
## Analysis_Th 워크플로우 — 프롬프트 요리책 v 1.1
*(Last updated: 2025-07-02 · 반영 사항: Project v1.1 동기화, `config.yaml` 연동, 대화형 UI 중심 시나리오 강화)*

---

**Cookbook 개요:**  
이 문서는 `run_analysis_workflow.py` 스크립트가 아닌, **웹 UI 대화창**에서 Analysis_Th 워크플로우를 수동으로 진행하고 싶을 때 사용하는 "보조 프롬프트 모음집"입니다.
기본 설정은 `config.yaml`에서 가져오며, 이 요리책의 프롬프트들은 분석 세션 중에 실시간으로 설정을 조정하거나 특정 작업을 요청할 때 사용됩니다.

---

**프롬프트 분류 키:**

| 태그 | 용도 | 위험도 |
|------|------|--------|
| `[#diagnostic]` | 설정 확인·오류 점검 | 낮음 |
| `[#tuning]` | 가중치·방법론 조정 | 중간 |
| `[#override]` | 품질 게이트 무시·강제 진행 | 높음 |
| `[#deepdive]` | 특정 항목 심화 분석 | 낮음 |
| `[#export]` | 요약·아카이브·데이터 추출 | 낮음 |

---

**1. 세션 시작 전: 설정 확인  [#diagnostic]**

***목적:*** AI가 `config.yaml`의 기본 설정을 올바르게 인식했는지 초기 검증을 수행합니다.
```plaintext
현재 세션에 적용된 `config.yaml`의 주요 설정값(model_name, approval_mode, weighting_scheme 등)을 확인하고, 표 형식으로 요약해 주세요.
```

이 프롬프트를 통해 모델 버전·가중치·게이트 설정 누락을 조기에 발견할 수 있다.

---

**2. 분석 진행 중: 상태 점검·제어**

***2.1 진행 상황·토큰 현황 요청  [#diagnostic]***  

```plaintext
현재까지 완료된 Phase와 누적 토큰, 예상 잔여 토큰, 품질 게이트 통과 여부를 간단히 리포트해 주세요.
```

진척·비용을 한눈에 파악하여 운영 리스크를 줄인다.

***2.2 가중치 프리셋 호출  [#tuning]***  
가중치를 숫자 대신 프리셋으로 변경한다.  

| 프리셋 명령 | frequency | centrality | citation | 주요 용도 |
|-------------|-----------|------------|----------|-----------|
| `preset balanced` | 0.40 | 0.35 | 0.25 | 균형 잡힌 분석 |
| `preset concept_map` | 0.25 | 0.55 | 0.20 | 개념 관계 강조 |
| `preset surface_reading` | 0.55 | 0.25 | 0.20 | 표면 빈도 강조 |
| `preset intellectual_history` | 0.30 | 0.20 | 0.50 | 인용·영향사 연구 |

***사용 예시***  

```plaintext
preset concept_map
```

한 줄로 weighting_scheme이 즉시 업데이트된다.

***2.3 가중치 설명 요청  [#tuning]***  

```plaintext
explain weights
```

현재 weighting_scheme 값과 분석 효과를 평서문으로 설명받아 숫자의 의미를 직관적으로 파악한다.

***2.4 민감도 실행(가중치 스윕)  [#tuning]***  

```plaintext
sensitivity centrality 0.3-0.6 step 0.1
```

AI가 여러 가중치 조합으로 Phase 2.5를 자동 재실행하여 수렴 지수 변화를 표로 제공한다.

***2.5 실시간 파라미터 오버라이드  [#tuning]***  

```plaintext
weighting_scheme.network_centrality=0.55, weighting_scheme.frequency=0.25 로 설정하고 Phase 2.5를 다시 실행해 주세요.
```

CONFIG 파일 재업로드 없이 실험적 조정을 수행한다.

***2.6 품질 게이트 강제 통과  [#override]***  

```plaintext
override_gate=true 로 설정하고 Phase 3을 즉시 진행하십시오. 사유: 예비 연구 단계라 낮은 수렴도도 참고하고자 합니다.
```

사유를 기록하면 보고서 부록에 자동 기입되어 투명성을 보장한다.

***2.7 특정 부분 심화 분석  [#deepdive]***  

```plaintext
Phase 3에서 분석된 '성육신적 영성'(성공회 전통) 부분만 500자 분량으로 더 자세히 설명하고 관련 1차 자료 3건을 제시해 주세요.
```

---

**3. 오류·예외 대응 프롬프트  [#diagnostic]**

| 증상 | 빠른 대응 프롬프트 |
|------|-------------------|
| `hallucination_check=false` | ```Phase X에서 잘못 인용된 구절만 다시 검토하고 수정해 주세요.``` |
| `token_limit_exceeded` | ```Phase Y를 Y-A와 Y-B로 분할 실행해 주세요.``` |
| 통계 유효성 과소 | ```Phase 1 정량 분석에서 p-value>0.05인 지표를 보조 지표로 이동하고 다시 요약해 주세요.``` |

---

**4. 분석 종료 후: 결과물 활용**

***4.1 발표용 요약·슬라이드  [#export]***  

```plaintext
전체 Phase 결과를 바탕으로 5분 구두 발표용 요약(600–800자)과 슬라이드 제목 5개를 제안해 주세요.
```

***4.2 전체 결과물 아카이브  [#export]***  

```plaintext
모든 phase_results YAML을 하나의 JSON 배열로 묶어 출력하고, ZIP 다운로드 경로와 옵시디언 연구노트용 Markdown 초안을 안내해 주세요.
```

---

**5. 10분 퀵 스타트 시나리오**

1. **설정 확인** – '설정 확인' 프롬프트로 파라미터 상태 점검.  
2. **Phase 0 실행** – 최초 시스템 지시에 따라 Phase 0 수행, "CONFIRM" 확인.  
3. **Phase 1–2 진행** – 필요 시 `preset balanced` 유지.  
4. **Phase 2.5** – 수렴 지수 확인. 낮으면 `preset concept_map` 또는 민감도 실행.  
5. **Phase 3–4** – 게이트 통과 후 심층·종합 분석 완료.  
6. **발표 자료 추출** – 발표용 요약·슬라이드 생성.  
7. **아카이브** – JSON·ZIP·Markdown 패키징 요청으로 세션 종료.

---

**부록: 값 범위–효과 간단 표**

| 값 범위 | frequency 효과 | centrality 효과 | citation 효과 |
|---------|---------------|----------------|---------------|
| 0.10–0.30 | 표면 의미 약화, 함축적 해석 강화 | 개념 망 해석 보조 | 외부 인용 의존 감소 |
| 0.30–0.50 | 균형적 해석 | 균형적 맥락 중시 | 인용 정보 균형 |
| 0.50–0.70 | 단어 중심 해석 편향 | 구조 해석 주도 | 영향사 초점 확대 |
| 0.70–0.90 | 빈도 지표 폭주 위험 | 숨은 구조 과해석 위험 | 권위 인용 과의존 위험 |

---

**결론:**  
이 Cookbook은 사용자가 Analysis_Th 워크플로우를 "단순 지시"가 아닌 "대화형 연구" 모드로 운용하도록 돕는다. 프리셋·설명·민감도·오류 대응·퀵 스타트 도구를 활용하면, 정량 분석 초심자라도 두세 번의 프롬프트 입력만으로 가중치 세팅 → 품질 검증 → 결과 활용까지 전 과정을 통제할 수 있다.  

```
